[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:sshd]
command=/usr/sbin/sshd -D
autostart=true
autorestart=true
stdout_logfile=/app/logs/sshd.log
stderr_logfile=/app/logs/sshd.log

[program:fantasyfolio]
command=python -m fantasyfolio.cli run
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/fantasyfolio.log
stderr_logfile=/app/logs/fantasyfolio.log
environment=FANTASYFOLIO_ENV="production",FANTASYFOLIO_DATABASE_PATH="/app/data/fantasyfolio.db"

[program:thumbnail-daemon]
command=python /app/scripts/thumbnail_daemon.py
directory=/app
autostart=false
autorestart=true
stdout_logfile=/app/logs/thumbnail_daemon.log
stderr_logfile=/app/logs/thumbnail_daemon.log
environment=FANTASYFOLIO_DATABASE_PATH="/app/data/fantasyfolio.db",CONTENT_ROOT="/content/models",THUMBNAIL_DIR="/app/thumbnails/3d",FAST_WORKERS="4",SLOW_WORKERS="2"

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700
