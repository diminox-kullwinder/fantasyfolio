[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/var/run/supervisord.pid

[program:sshd]
command=/usr/sbin/sshd -D
autostart=true
autorestart=true
stdout_logfile=/app/logs/sshd.log
stderr_logfile=/app/logs/sshd.log

[program:fantasyfolio]
command=python -m fantasyfolio.cli run
directory=/app
autostart=true
autorestart=true
stdout_logfile=/app/logs/fantasyfolio.log
stderr_logfile=/app/logs/fantasyfolio.log
environment=FANTASYFOLIO_ENV="%(ENV_FANTASYFOLIO_ENV)s",FANTASYFOLIO_DATABASE_PATH="%(ENV_FANTASYFOLIO_DATABASE_PATH)s"

[program:thumbnail-daemon]
command=python /app/scripts/thumbnail_daemon.py
directory=/app
autostart=%(ENV_ENABLE_THUMBNAIL_DAEMON)s
autorestart=true
stdout_logfile=/app/logs/thumbnail_daemon.log
stderr_logfile=/app/logs/thumbnail_daemon.log
environment=FANTASYFOLIO_DATABASE_PATH="%(ENV_FANTASYFOLIO_DATABASE_PATH)s",CONTENT_ROOT="%(ENV_CONTENT_ROOT)s",THUMBNAIL_DIR="%(ENV_THUMBNAIL_DIR)s",FAST_WORKERS="%(ENV_FAST_WORKERS)s",SLOW_WORKERS="%(ENV_SLOW_WORKERS)s"

[supervisorctl]
serverurl=unix:///var/run/supervisor.sock

[unix_http_server]
file=/var/run/supervisor.sock
chmod=0700
