DAM v0.3.1 - Tiered thumbnail processing, deduplication system, performance fixes

SUMMARY
=======

Major release with three new features focused on indexing performance 
and data integrity for large libraries (30K+ assets) on network storage.

NEW FEATURES
============

1. Tiered Thumbnail Processing (Fast/Slow Lane Architecture)
   - Files partitioned by size: < 30MB (fast lane), > 30MB (slow lane)
   - Fast lane: 28 workers, ~45 renders/sec → 22K files in ~8 minutes
   - Slow lane: 4 workers, dedicated for large files → 8K files in ~3 hours
   - Prevents large files from blocking small file processing
   - Both lanes run in parallel

2. Deduplication System (Two-tier Collision Detection)
   - Partial hash: MD5(first 64KB + last 64KB + size) for all files
   - Full hash: MD5(entire file) only for collision candidates
   - Auto-triggered when compute-hashes completes
   - Marks duplicates in database (is_duplicate, duplicate_of_id)
   - Expected: ~50-100 collisions, ~5-15 true duplicates per 34K files

3. Thumbnail Daemon Performance Fix (204x speedup)
   - Fixed .env.local config loading
   - Database now tracks has_thumbnail flag properly
   - Worker pool sizing and timeout tuning

DOCUMENTATION (NEW)
===================

- docs/INDEXING_STRATEGY.md — Comprehensive indexing architecture guide
- docs/DEDUPLICATION.md — Two-tier deduplication system
- docs/THUMBNAIL_PERFORMANCE_FIX.md — Performance analysis and fixes

FILES CHANGED
=============

New Files:
- dam/core/deduplication.py (450 lines) — Deduplication system
- docs/INDEXING_STRATEGY.md — Architecture documentation
- docs/DEDUPLICATION.md — Deduplication documentation

Modified Files:
- scripts/thumbnail_daemon.py — Rewritten for tiered processing (v2)
- dam/cli.py — Added detect-duplicates command, auto-trigger
- CHANGELOG.md — v0.3.1 release notes

Database Schema:
- Added: is_duplicate, duplicate_of_id, full_hash columns on models/assets

PERFORMANCE IMPACT
==================

Thumbnail Rendering:
  Before: 0.23 renders/sec (41+ hours for 34K models)
  After:  Fast lane ~45/sec + Slow lane dedicated
  Result: ~3 hours total (was 41+ hours)

Deduplication:
  Partial hash: ~100/sec (~6 minutes for 34K)
  Full hash: Only for collisions (~30 seconds)

CONFIGURATION
=============

Tiered processing settings (thumbnail_daemon.py):
  SIZE_THRESHOLD_MB = 30   # Cutoff between fast/slow
  FAST_WORKERS = 28        # High parallelism for small files
  SLOW_WORKERS = 4         # Low parallelism for large files
  FAST_TIMEOUT = 120       # 2 min for small files
  SLOW_TIMEOUT = 600       # 10 min for large files

TESTING
=======

Validated on production database:
- 34,074 3D models indexed
- Fast lane: 22,031 files queued, ~45 renders/sec confirmed
- Slow lane: 7,866 files queued, dedicated processing
- Deduplication CLI tested, auto-trigger verified
- System stable under 28+4 concurrent worker load

DEPLOYMENT
==========

Safe to deploy immediately:
- No breaking changes
- Database migrations auto-applied (new columns)
- Backward compatible with existing thumbnail cache
- Can restart daemon while system running

---

Version: 0.3.1
Previous: 0.3.0
